ARXH:	
	IN 10H	; HAVE FULL ACCESS TO THE WHOLE MEMORY
	LXI H,0A00H ; STARTING ADDRESS OF SAVING THE BLOCK OF DATA
	MVI B,04H ; INITIALIZATION OF B TO 4
L1:	
	MVI M,10H ; 
	INX H ; INCREMENT THE HL REGISTER
	DCR B ; B = B-1
	JNZ L1 ; ITERATE TILL B IS ZERO
LINE0:	
	MVI A,FEH ; SCAN PORT 11111110 -LINE SELECT
	STA 2800H	
	LDA 1800H ; READ THE COLUMNS
	ANI 07H ; KEEP ONLY THE LAST THREE LSBS THE OTHER HAVE UNDETERMINED VALUES 	
	MVI C,86H ; C IS THE CODE OF EACH BUTTON
	CPI 06H ; BUTTON INSTR STEP 
	JZ SHOW	
	MVI C,85H	 
	CPI 05H	; BUTTON FETCH PC
	JZ SHOW	 	
			; IGNORING THE HDWR_STEP BUTTON
LINE1:	
	MVI A,FDH ; SCAN PORT 11111101 - LINE SELECT
	STA 2800H	
	LDA 1800H ; READ_COLUMNS	 
	ANI 07H ; RETAIN ONLY THE 3 MSBS		
	MVI C,84H	
	CPI 06H ; BUTTON RUN
	JZ SHOW	
	MVI C,80H	
	CPI 05H ; BUTTON FETCH_REG
	JZ SHOW	 
	MVI C,82H	 
	CPI 03H ; BUTTON FETCH_ADDRS
	JZ SHOW
LINE2:	
	MVI A,FBH ; SCAN PORT 11111011 - LINE SELECT
	STA 2800H	
	LDA 1800H	 
	ANI 07H		
	MVI C,00H	
	CPI 06H ; BUTTON 0
	JZ SHOW	
	MVI C,83H	
	CPI 05H ; BUTTON STORE/INCR
	JZ SHOW	 
	MVI C,81H	 
	CPI 03H ; BUTTON DECR
	JZ SHOW
LINE3:	
	MVI A,F7H
	STA 2800H	
	LDA 1800H	 
	ANI 07H		
	MVI C,01H ; BUTTON 1
	CPI 06H	
	JZ SHOW	
	MVI C,02H ; BUTTON 2
	CPI 05H	
	JZ SHOW	 
	MVI C,03H ; BUTTON 3
	CPI 03H	
	JZ SHOW
LINE4:	
	MVI A,EFH
	STA 2800H	
	LDA 1800H	 
	ANI 07H		
	MVI C,04H
	CPI 06H ; BUTTON 4
	JZ SHOW
	MVI C,05H
	CPI 05H ; BUTTON 5
	JZ SHOW
	MVI C,06H
	CPI 03H ; BUTTON 6
	JZ SHOW
LINE5:	
	MVI A,DFH
	STA 2800H	
	LDA 1800H	 
	ANI 07H		
	MVI C,07H
	CPI 06H ; BUTTON 7
	JZ SHOW
	MVI C,08H
	CPI 05H ; BUTTON 8
	JZ SHOW
	MVI C,09H
	CPI 03H ; BUTTON 9
	JZ SHOW
LINE6:	
	MVI A,BFH
	STA 2800H	
	LDA 1800H	 
	ANI 07H		
	MVI C,0AH
	CPI 06H ;BUTTON A
	JZ SHOW
	MVI C,0BH
	CPI 05H ;BUTTON B
	JZ SHOW
	MVI C,0CH
	CPI 03H ;BUTTON C
	JZ SHOW
LINE7:	
	MVI A,7FH
	STA 2800H	
	LDA 1800H	 
	ANI 07H		
	MVI C,0DH
	CPI 06H ;BUTTON D
	JZ SHOW
	MVI C,0EH
	CPI 05H ;BUTTON E
	JZ SHOW
	MVI C,0FH
	CPI 03H ; BUTTON F
	JZ SHOW
	JMP ARXH ; IF NONE OF THE BUTTON IS PRESSED THEN PERFORM THE SCAN AGAIN
SHOW:	
	LXI H,0A04H ; LOAD THE DESIRED ADDRESS TO HL REGISTER 
	MOV A,C ; WE STORE THE VALUE OF C(CODE) INTO THE ACCUMULATOR
	ANI 0FH ; WE KEEP ONLY THE LAST 4 BITS 
	MOV M,A ; WE PLACE THEM IN THE MEMORY LOCATION MEANING THE FIFTH BIT OF THE SEVEN SEGMENT LED SCREEN
	INX H	; WE MOVE INTO THE NEXT MEMORY LOCATION
	MOV A,C ; WE PUT THE VALUE OF CODE INTO THE ACCUMULATOR		
	ANI F0H ; WE KEEP THE 4 MSBS
	RLC ; BY PERFORMING 4 SHIFTS TO THE LEFT WE MAKE THEM LSBS
	RLC
	RLC
	RLC	
	MOV M,A ; WE PRACTICALLY MOVE THEM TO THE 6TH BIT OF THE SCREEN LED 
	LXI D,0A00H ; NECESSARY TRANSFER OF THE BLOCK IN ORDER TO BE READ BY DCD	
	CALL STDM	
	CALL DCD ; ROUTINES FOR REPRESENTING THE OUTPUT  
	JMP ARXH ; ITERATE AGAIN AND AGAIN
END
